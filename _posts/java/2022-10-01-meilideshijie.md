---
layout: blog
book: true
title:  "微服务-简介"
background: green
background-image: http://ot1cc1u9t.bkt.clouddn.com/17-7-15/78939382.jpg
date:   2022-10-01 23:13:54
category: java
tags:
- 微服务 
---

<b>为什么要使用微服务?微服务有哪些优点</b>

1、易于开发和维护

由于微服务单个模块就相当于一个项目，开发这个模块我们就只需关心这个模块的逻辑即可，代码量和逻辑复杂度都会降低，从而易于开发和维护。

2、启动较快

这是相对单个微服务来讲的，相比于启动单体架构的整个项目，启动某个模块的服务速度明显是要快很多的。

3、局部修改容易部署

在开发中发现了一个问题，如果是单体架构的话，我们就需要重新发布并启动整个项目，非常耗时间，但是微服务则不同，哪个模块出现了bug我们只需要解决那个模块的bug就可以了，解决完bug之后，我们只需要重启这个模块的服务即可，部署相对简单，不必重启整个项目从而大大节约时间。

4、技术栈不受限

比如订单微服务和电影微服务原来都是用java写的，现在我们想把电影微服务改成nodeJs技术，这是完全可以的，而且由于所关注的只是电影的逻辑而已，因此技术更换的成本也就会少很多。

5、按需伸缩

我们上面说了单体架构在想扩展某个模块的性能时不得不考虑到其它模块的性能会不会受影响，对于我们微服务来讲，完全不是问题，电影模块通过什么方式来提升性能不必考虑其它模块的情况。

<b>当然了微服务也有缺点,所有服务都需要实际情况讨论</b>

1、运维要求较高

对于单体架构来讲，我们只需要维护好这一个项目就可以了，但是对于微服务架构来讲，由于项目是由多个微服务构成的，每个模块出现问题都会造成整个项目运行出现异常，想要知道是哪个模块造成的问题往往是不容易的，因为我们无法一步一步通过debug的方式来跟踪，这就对运维人员提出了很高的要求。

2、分布式的复杂性

对于单体架构来讲，我们可以不使用分布式，但是对于微服务架构来说，分布式几乎是必会用的技术，由于分布式本身的复杂性，导致微服务架构也变得复杂起来。

3、接口调整成本高

比如，用户微服务是要被订单微服务和电影微服务所调用的，一旦用户微服务的接口发生大的变动，那么所有依赖它的微服务都要做相应的调整，由于微服务可能非常多，那么调整接口所造成的成本将会明显提高。

4、重复劳动

对于单体架构来讲，如果某段业务被多个模块所共同使用，我们便可以抽象成一个工具类，被所有模块直接调用，但是微服务却无法这样做，因为这个微服务的工具类
是不能被其它微服务所直接调用的，从而我们便不得不在每个微服务上都建这么一个工具类，从而导致代码的重复。

<b>目前微服务主要分为阿里开源维护的dubbo与spring家族的spring cloud,这里笔者只学习了spring cloud,因此只介绍spring cloud</b>

1、springCloud集成了各种微服务功能组件，基于SpringBoot实现组件的自动装配

常见的组件：服务注册发现（Eureka），服务远程调用(Feign)，服务链路监控(Zipkin,Sleuth)，统一配置管理(SpringCloudConfig)，统一网关路由(SpringCloudGateway)，流控降级保护(Hystix)

Eureka Client通过Eureka注册,每个Client会去拉取注册中心的注册信息,缓存到本地,当有客户端发起请求的时候,通过网关服务进行统一的鉴权路由转发给后端,后端服务器收到请求后,会根据本地缓存的注册信息地址,向相应的微服务发起请求,如果中途某个服务失败或者请求不通,则会进行服务熔断,先将这个微服务下线,返回默认的服务降级的response,直到此微服务通过心跳监视(每几秒发起请求)正常之后,恢复此微服务。

<img src="{{ site.url }}/style/images/cloud_introduction.png"/>




	

